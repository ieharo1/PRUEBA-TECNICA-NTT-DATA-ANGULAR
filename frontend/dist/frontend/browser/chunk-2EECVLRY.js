import{a as z}from"./chunk-UHBTZA2K.js";import{b as y,d as M,g as S}from"./chunk-7WJJRPRX.js";import{a as I,b as c,c as w,d as O,f as F,g as T,h as N,l as k,n as D}from"./chunk-ETIHGRTA.js";import{Ga as l,Ja as d,La as i,Ma as r,Na as s,Oa as b,Pa as v,Qa as m,Sa as o,Ta as h,W as x,Za as C,da as _,ea as g,va as a,vb as P,wa as p,wb as E}from"./chunk-F7SZSIFR.js";function R(t,n){t&1&&(i(0,"div"),o(1,"Cargando..."),r())}function V(t,n){if(t&1&&(i(0,"div",5),o(1),r()),t&2){let e=m();a(),h(e.errorMessage)}}function G(t,n){t&1&&(i(0,"small"),o(1,"Nombre es obligatorio."),r())}function j(t,n){t&1&&(i(0,"small"),o(1,"M\xEDnimo 3 caracteres."),r())}function A(t,n){if(t&1&&(i(0,"div",5),l(1,G,2,0,"small",2)(2,j,2,0,"small",2),r()),t&2){let e=m(2);a(),d("ngIf",e.f.name.errors==null?null:e.f.name.errors.required),a(),d("ngIf",e.f.name.errors==null?null:e.f.name.errors.minlength)}}function B(t,n){t&1&&(i(0,"small"),o(1,"Descripci\xF3n es obligatoria."),r())}function L(t,n){t&1&&(i(0,"small"),o(1,"M\xEDnimo 5 caracteres."),r())}function U(t,n){if(t&1&&(i(0,"div",5),l(1,B,2,0,"small",2)(2,L,2,0,"small",2),r()),t&2){let e=m(2);a(),d("ngIf",e.f.description.errors==null?null:e.f.description.errors.required),a(),d("ngIf",e.f.description.errors==null?null:e.f.description.errors.minlength)}}function Y(t,n){t&1&&(i(0,"small"),o(1,"Logo es obligatorio."),r())}function H(t,n){t&1&&(i(0,"small"),o(1,"Debe ser una URL v\xE1lida."),r())}function J(t,n){if(t&1&&(i(0,"div",5),l(1,Y,2,0,"small",2)(2,H,2,0,"small",2),r()),t&2){let e=m(2);a(),d("ngIf",e.f.logo.errors==null?null:e.f.logo.errors.required),a(),d("ngIf",e.f.logo.errors==null?null:e.f.logo.errors.pattern)}}function K(t,n){t&1&&(i(0,"small"),o(1,"Fecha de lanzamiento es obligatoria."),r())}function Q(t,n){if(t&1&&(i(0,"div",5),l(1,K,2,0,"small",2),r()),t&2){let e=m(2);a(),d("ngIf",e.f.date_release.errors==null?null:e.f.date_release.errors.required)}}function W(t,n){t&1&&(i(0,"small"),o(1,"Fecha de revisi\xF3n es obligatoria."),r())}function X(t,n){if(t&1&&(i(0,"div",5),l(1,W,2,0,"small",2),r()),t&2){let e=m(2);a(),d("ngIf",e.f.date_revision.errors==null?null:e.f.date_revision.errors.required)}}function Z(t,n){if(t&1){let e=b();i(0,"form",6),v("ngSubmit",function(){_(e);let u=m();return g(u.onSubmit())}),i(1,"div",7)(2,"div",8)(3,"label",9),o(4,"ID"),r(),s(5,"input",10),r(),i(6,"div",8)(7,"label",11),o(8,"Nombre"),r(),s(9,"input",12),l(10,A,3,2,"div",3),r()(),i(11,"div",7)(12,"div",8)(13,"label",13),o(14,"Descripci\xF3n"),r(),s(15,"textarea",14),l(16,U,3,2,"div",3),r(),i(17,"div",8)(18,"label",15),o(19,"Logo URL"),r(),s(20,"input",16),l(21,J,3,2,"div",3),r()(),i(22,"div",7)(23,"div",8)(24,"label",17),o(25,"Fecha de lanzamiento"),r(),s(26,"input",18),l(27,Q,2,1,"div",3),r(),i(28,"div",8)(29,"label",19),o(30,"Fecha de revisi\xF3n"),r(),s(31,"input",20),l(32,X,2,1,"div",3),r()(),i(33,"div",21)(34,"button",22),v("click",function(){_(e);let u=m();return g(u.goBack())}),o(35,"Cancelar"),r(),i(36,"button",23),o(37,"Guardar Cambios"),r()()()}if(t&2){let e=m();d("formGroup",e.form),a(10),d("ngIf",e.f.name.touched&&e.f.name.invalid),a(6),d("ngIf",e.f.description.touched&&e.f.description.invalid),a(5),d("ngIf",e.f.logo.touched&&e.f.logo.invalid),a(6),d("ngIf",e.f.date_release.touched&&e.f.date_release.invalid),a(5),d("ngIf",e.f.date_revision.touched&&e.f.date_revision.invalid),a(4),d("disabled",e.form.invalid)}}var q=class t{constructor(n,e,f,u){this.fb=n;this.route=e;this.productService=f;this.router=u}form;loading=!1;errorMessage="";productId=null;ngOnInit(){this.productId=this.route.snapshot.paramMap.get("id"),this.crearFormulario(),this.productId?this.cargarProducto(this.productId):this.errorMessage="ID de producto inv\xE1lido."}crearFormulario(){this.form=this.fb.group({id:[{value:"",disabled:!0},c.required],name:["",[c.required,c.minLength(3)]],description:["",[c.required,c.minLength(5)]],logo:["",[c.required,c.pattern(/^https?:\/\/.+/)]],date_release:["",c.required],date_revision:["",c.required]})}cargarProducto(n){this.loading=!0,this.productService.getProductById(n).subscribe({next:e=>{if(!e){this.errorMessage="Producto no encontrado.",this.loading=!1;return}this.form.patchValue({id:e.id,name:e.name,description:e.description,logo:e.logo,date_release:e.date_release,date_revision:e.date_revision}),this.loading=!1},error:e=>{this.errorMessage="Error cargando producto: "+e.message,this.loading=!1}})}get f(){return this.form.controls}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}if(!this.productId){this.errorMessage="ID de producto inv\xE1lido.";return}let n={id:this.productId,name:this.f.name.value,description:this.f.description.value,logo:this.f.logo.value,date_release:this.f.date_release.value,date_revision:this.f.date_revision.value};this.loading=!0,this.productService.updateProduct(n).subscribe({next:()=>{this.loading=!1,this.router.navigate(["/productos"])},error:e=>{this.errorMessage="Error actualizando producto: "+e.message,this.loading=!1}})}goBack(){this.router.navigate(["/productos"])}static \u0275fac=function(e){return new(e||t)(p(k),p(y),p(z),p(M))};static \u0275cmp=x({type:t,selectors:[["app-edit-product"]],standalone:!0,features:[C],decls:7,vars:3,consts:[[1,"card-container"],[1,"form-card"],[4,"ngIf"],["class","error-msg",4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[1,"error-msg"],[3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group"],["for","id"],["id","id","formControlName","id"],["for","name"],["id","name","formControlName","name"],["for","description"],["id","description","formControlName","description"],["for","logo"],["id","logo","formControlName","logo"],["for","date_release"],["type","date","id","date_release","formControlName","date_release"],["for","date_revision"],["type","date","id","date_revision","formControlName","date_revision"],[1,"form-actions"],["type","button",1,"btn-secondary",3,"click"],["type","submit",1,"btn-enviar",3,"disabled"]],template:function(e,f){e&1&&(i(0,"div",0)(1,"div",1)(2,"h2"),o(3,"Editar Producto"),r(),l(4,R,2,0,"div",2)(5,V,2,1,"div",3)(6,Z,38,7,"form",4),r()()),e&2&&(a(4),d("ngIf",f.loading),a(),d("ngIf",f.errorMessage),a(),d("ngIf",!f.loading))},dependencies:[E,P,D,F,I,w,O,T,N,S],styles:[".card-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:2rem;background:linear-gradient(135deg,#f5f7fa,#e4e8ec);min-height:calc(100vh - 200px);overflow-y:auto}.form-card[_ngcontent-%COMP%]{background:#fff;border-radius:var(--border-radius);padding:2.5rem;box-shadow:var(--shadow-hover);width:100%;max-width:800px;box-sizing:border-box;animation:_ngcontent-%COMP%_slideUp .4s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.form-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:28px;margin-bottom:2rem;color:var(--secondary-color);font-weight:700}.loading[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#64748b;font-size:18px}.form-row[_ngcontent-%COMP%]{display:flex;gap:1.5rem;margin-bottom:1.25rem;flex-wrap:wrap}.form-group[_ngcontent-%COMP%]{flex:1;min-width:250px;display:flex;flex-direction:column}label[_ngcontent-%COMP%]{font-weight:600;color:var(--text-color);margin-bottom:.5rem;font-size:14px}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:.75rem 1rem;border:2px solid #e2e8f0;border-radius:10px;font-size:14px;background:#f8fafc;transition:var(--transition)}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{border-color:var(--primary-color);background:#fff;outline:none;box-shadow:0 0 0 3px #00d9ff1a}textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1.5rem;margin-top:2.5rem}.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e2e8f0,#cbd5e1);color:var(--secondary-color);padding:.75rem 2rem;border:none;border-radius:30px;font-weight:600;font-size:15px;cursor:pointer;transition:var(--transition)}.btn-secondary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 15px #0000001a}.btn-enviar[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--warning-color) 0%,#e69500 100%);color:#fff;padding:.75rem 2rem;border:none;border-radius:30px;font-weight:600;font-size:15px;cursor:pointer;transition:var(--transition);box-shadow:0 4px 15px #ffa5024d}.btn-enviar[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #ffa50266}.btn-enviar[_ngcontent-%COMP%]:disabled{background:#cbd5e1;cursor:not-allowed;box-shadow:none}.error-msg[_ngcontent-%COMP%]{color:var(--danger-color);font-size:12px;margin-top:.25rem}@media (max-width: 600px){.form-card[_ngcontent-%COMP%]{padding:1.5rem}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.form-group[_ngcontent-%COMP%]{min-width:100%}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.btn-secondary[_ngcontent-%COMP%], .btn-enviar[_ngcontent-%COMP%]{width:100%;justify-content:center}}"]})};export{q as EditProductComponent};
