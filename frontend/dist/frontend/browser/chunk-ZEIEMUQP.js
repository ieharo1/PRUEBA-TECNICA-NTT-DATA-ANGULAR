import{a as Y,b as d,c as j,d as q,f as R,g as G,h as z,l as H,n as B}from"./chunk-TSZ43ZED.js";import{$ as F,A as g,E as u,F as y,H as p,J as s,N as n,O as t,P as m,R as E,T as o,ka as T,la as I,m as k,ma as A,qa as N,t as D,u as w,ua as L,z as l}from"./chunk-OBMOT5OB.js";function U(a,i){a&1&&(n(0,"span",13),o(1,"\u2713 ID disponible"),t())}function $(a,i){a&1&&(n(0,"span",14),o(1,"\u2715 El ID ya existe"),t())}function J(a,i){a&1&&(n(0,"span",14),o(1,"\u2715 ID inv\xE1lido (3-10 caracteres)"),t())}function K(a,i){a&1&&(n(0,"span",17),o(1,"M\xEDnimo 5 caracteres"),t())}function Q(a,i){a&1&&(n(0,"span",17),o(1,"M\xEDnimo 10 caracteres"),t())}function W(a,i){a&1&&(n(0,"span",17),o(1,"URL requerida"),t())}function X(a,i){a&1&&(n(0,"span",17),o(1,"Fecha requerida"),t())}function Z(a,i){a&1&&(n(0,"span",17),o(1,"Fecha requerida"),t())}var V=class a{constructor(i,r,e,c){this.fb=i;this.http=r;this.router=e;this.toastService=c}form;idDisponible=null;ngOnInit(){let i=new Date().toISOString().split("T")[0],r=new Date;r.setFullYear(r.getFullYear()+1);let e=r.toISOString().split("T")[0];this.form=this.fb.group({id:["",[d.required,d.minLength(3),d.maxLength(10)]],name:["",[d.required,d.minLength(5),d.maxLength(100)]],description:["",[d.required,d.minLength(10),d.maxLength(200)]],logo:["",d.required],date_release:[i,d.required],date_revision:[e,d.required]})}verificarId(){let i=this.form.value.id;if(!i||i.length<3){this.idDisponible=null;return}this.http.get(`http://localhost:3002/bp/products/verification/${i}`).subscribe({next:r=>this.idDisponible=!r,error:()=>{this.idDisponible=null,this.toastService.error("Error al verificar ID. Aseg\xFArate de que el backend est\xE9 corriendo.")}})}onSubmit(){if(this.form.invalid||this.idDisponible===!1)return;let i=this.form.value;this.http.post("http://localhost:3002/bp/products",i).subscribe({next:()=>{this.toastService.success("\xA1Producto creado exitosamente!"),setTimeout(()=>{this.router.navigate(["/productos"])},1500)},error:r=>{r.status===0?this.toastService.error("No se puede conectar al servidor. Aseg\xFArate de que el backend est\xE9 corriendo en localhost:3002"):this.toastService.error("Error al crear el producto: "+(r.error?.message||r.message))}})}onReset(){let i=new Date().toISOString().split("T")[0],r=new Date;r.setFullYear(r.getFullYear()+1);let e=r.toISOString().split("T")[0];this.form.reset({date_release:i,date_revision:e}),this.idDisponible=null}static \u0275fac=function(r){return new(r||a)(g(H),g(I),g(N),g(L))};static \u0275cmp=k({type:a,selectors:[["app-add-product"]],standalone:!0,features:[F],decls:66,vars:24,consts:[[1,"form-container"],[1,"form-card"],[1,"form-header"],[1,"header-icon"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M12 6v6m0 0v6m0-6h6m-6 0H6"],[1,"product-form",3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"form-group"],["for","id"],[1,"label-icon"],["id","id","formControlName","id","placeholder","Ej: PROD-001",3,"blur"],[1,"field-status"],[1,"status","success"],[1,"status","error"],["for","name"],["id","name","formControlName","name","placeholder","Ej: Producto Premium"],[1,"field-error"],[1,"form-group","full-width"],["for","description"],["id","description","formControlName","description","placeholder","Describe las caracter\xEDsticas del producto...","rows","3"],["for","logo"],["id","logo","formControlName","logo","placeholder","https://ejemplo.com/logo.png"],["for","date_release"],["type","date","id","date_release","formControlName","date_release"],["for","date_revision"],["type","date","id","date_revision","formControlName","date_revision"],[1,"form-actions"],["type","button",1,"btn-reset",3,"click"],["d","M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"],["type","submit",1,"btn-submit",3,"disabled"],["d","M5 13l4 4L19 7"]],template:function(r,e){if(r&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),D(),n(4,"svg",4),m(5,"path",5),t()(),w(),n(6,"h2"),o(7,"Nuevo Producto"),t(),n(8,"p"),o(9,"Completa los datos del nuevo producto"),t()(),n(10,"form",6),E("ngSubmit",function(){return e.onSubmit()}),n(11,"div",7)(12,"div",8)(13,"label",9)(14,"span",10),o(15,"\u{1F3F7}\uFE0F"),t(),o(16," ID del Producto "),t(),n(17,"input",11),E("blur",function(){return e.verificarId()}),t(),n(18,"div",12),u(19,U,2,0,"span",13)(20,$,2,0,"span",14)(21,J,2,0,"span",14),t()(),n(22,"div",8)(23,"label",15)(24,"span",10),o(25,"\u{1F4DD}"),t(),o(26," Nombre del Producto "),t(),m(27,"input",16),u(28,K,2,0,"span",17),t(),n(29,"div",18)(30,"label",19)(31,"span",10),o(32,"\u{1F4CB}"),t(),o(33," Descripci\xF3n "),t(),m(34,"textarea",20),u(35,Q,2,0,"span",17),t(),n(36,"div",8)(37,"label",21)(38,"span",10),o(39,"\u{1F5BC}\uFE0F"),t(),o(40," URL del Logo "),t(),m(41,"input",22),u(42,W,2,0,"span",17),t(),n(43,"div",8)(44,"label",23)(45,"span",10),o(46,"\u{1F4C5}"),t(),o(47," Fecha de Liberaci\xF3n "),t(),m(48,"input",24),u(49,X,2,0,"span",17),t(),n(50,"div",8)(51,"label",25)(52,"span",10),o(53,"\u{1F504}"),t(),o(54," Fecha de Revisi\xF3n "),t(),m(55,"input",26),u(56,Z,2,0,"span",17),t()(),n(57,"div",27)(58,"button",28),E("click",function(){return e.onReset()}),D(),n(59,"svg",4),m(60,"path",29),t(),o(61," Reiniciar "),t(),w(),n(62,"button",30),D(),n(63,"svg",4),m(64,"path",31),t(),o(65," Guardar Producto "),t()()()()()),r&2){let c,f,_,b,h,C,v,P,x,M,O,S;l(10),y("formGroup",e.form),l(7),p("error",((c=e.form.get("id"))==null?null:c.invalid)&&((c=e.form.get("id"))==null?null:c.touched))("success",e.idDisponible===!0),l(2),s(e.idDisponible===!0?19:-1),l(),s(e.idDisponible===!1?20:-1),l(),s((f=e.form.get("id"))!=null&&f.invalid&&((f=e.form.get("id"))!=null&&f.touched)&&e.idDisponible!==!1?21:-1),l(6),p("error",((_=e.form.get("name"))==null?null:_.invalid)&&((_=e.form.get("name"))==null?null:_.touched)),l(),s((b=e.form.get("name"))!=null&&b.invalid&&((b=e.form.get("name"))!=null&&b.touched)?28:-1),l(6),p("error",((h=e.form.get("description"))==null?null:h.invalid)&&((h=e.form.get("description"))==null?null:h.touched)),l(),s((C=e.form.get("description"))!=null&&C.invalid&&((C=e.form.get("description"))!=null&&C.touched)?35:-1),l(6),p("error",((v=e.form.get("logo"))==null?null:v.invalid)&&((v=e.form.get("logo"))==null?null:v.touched)),l(),s((P=e.form.get("logo"))!=null&&P.invalid&&((P=e.form.get("logo"))!=null&&P.touched)?42:-1),l(6),p("error",((x=e.form.get("date_release"))==null?null:x.invalid)&&((x=e.form.get("date_release"))==null?null:x.touched)),l(),s((M=e.form.get("date_release"))!=null&&M.invalid&&((M=e.form.get("date_release"))!=null&&M.touched)?49:-1),l(6),p("error",((O=e.form.get("date_revision"))==null?null:O.invalid)&&((O=e.form.get("date_revision"))==null?null:O.touched)),l(),s((S=e.form.get("date_revision"))!=null&&S.invalid&&((S=e.form.get("date_revision"))!=null&&S.touched)?56:-1),l(6),y("disabled",e.form.invalid||e.idDisponible===!1)}},dependencies:[T,B,R,Y,j,q,G,z,A],styles:[".form-container[_ngcontent-%COMP%]{min-height:calc(100vh - 200px);display:flex;justify-content:center;align-items:flex-start;padding:2rem;background:linear-gradient(135deg,#0f172a,#1e293b,#0f172a)}.form-card[_ngcontent-%COMP%]{background:linear-gradient(145deg,#1e293be6,#0f172af2);border-radius:24px;padding:2.5rem;width:100%;max-width:800px;box-shadow:0 25px 50px #00000080;border:1px solid rgba(255,255,255,.1);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);animation:_ngcontent-%COMP%_slideUp .5s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.form-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2.5rem}.header-icon[_ngcontent-%COMP%]{width:80px;height:80px;margin:0 auto 1rem;background:linear-gradient(135deg,#06b6d4,#8b5cf6);border-radius:20px;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.header-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:40px;height:40px;color:#fff}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;background:linear-gradient(90deg,#06b6d4,#8b5cf6);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin:0 0 .5rem}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#94a3b8;margin:0;font-size:1rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1/-1}label[_ngcontent-%COMP%]{font-weight:600;color:#e2e8f0;margin-bottom:.75rem;font-size:.9rem;display:flex;align-items:center;gap:.5rem}.label-icon[_ngcontent-%COMP%]{font-size:1rem}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:1rem 1.25rem;border:2px solid rgba(255,255,255,.1);border-radius:14px;font-size:.95rem;background:#0f172acc;color:#fff;transition:all .3s ease}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#06b6d4;box-shadow:0 0 0 4px #06b6d426;background:#0f172a}input.error[_ngcontent-%COMP%], textarea.error[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 0 0 4px #ef444426}input.success[_ngcontent-%COMP%], textarea.success[_ngcontent-%COMP%]{border-color:#10b981;box-shadow:0 0 0 4px #10b98126}input[_ngcontent-%COMP%]::placeholder, textarea[_ngcontent-%COMP%]::placeholder{color:#475569}textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.field-status[_ngcontent-%COMP%]{margin-top:.5rem}.status[_ngcontent-%COMP%]{font-size:.8rem;display:flex;align-items:center;gap:.25rem}.status.success[_ngcontent-%COMP%]{color:#10b981}.status.error[_ngcontent-%COMP%]{color:#ef4444}.field-error[_ngcontent-%COMP%]{color:#ef4444;font-size:.8rem;margin-top:.5rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;margin-top:2.5rem}.btn-reset[_ngcontent-%COMP%], .btn-submit[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:1rem 2rem;border-radius:14px;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s ease}.btn-reset[_ngcontent-%COMP%]{background:#ffffff1a;color:#e2e8f0;border:2px solid rgba(255,255,255,.2)}.btn-reset[_ngcontent-%COMP%]:hover{background:#fff3;transform:translateY(-2px)}.btn-reset[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.btn-submit[_ngcontent-%COMP%]{background:linear-gradient(135deg,#10b981,#059669);color:#fff;border:none;box-shadow:0 4px 15px #10b98166}.btn-submit[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 25px #10b98180}.btn-submit[_ngcontent-%COMP%]:disabled{background:#374151;color:#6b7280;cursor:not-allowed;box-shadow:none}.btn-submit[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.success-message[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]{margin-top:1.5rem;padding:1rem 1.5rem;border-radius:12px;text-align:center;font-weight:500;animation:_ngcontent-%COMP%_fadeIn .3s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.success-message[_ngcontent-%COMP%]{background:#10b98126;border:1px solid rgba(16,185,129,.3);color:#10b981}.error-message[_ngcontent-%COMP%]{background:#ef444426;border:1px solid rgba(239,68,68,.3);color:#ef4444}@media (max-width: 768px){.form-container[_ngcontent-%COMP%]{padding:1rem}.form-card[_ngcontent-%COMP%]{padding:1.5rem}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.btn-reset[_ngcontent-%COMP%], .btn-submit[_ngcontent-%COMP%]{justify-content:center}}"]})};export{V as AddProductComponent};
