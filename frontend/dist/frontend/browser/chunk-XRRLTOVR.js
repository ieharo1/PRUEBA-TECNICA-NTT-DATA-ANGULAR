import{a as y,b as d,c as O,d as E,f as w,g as S,h as I,l as D,n as N}from"./chunk-ETIHGRTA.js";import{Bb as M,Cb as P,Ga as u,Ja as l,La as t,Ma as e,Na as c,Pa as f,Qa as b,Sa as i,Ta as v,W as _,Za as x,va as s,vb as h,wa as g,wb as C}from"./chunk-F7SZSIFR.js";function k(n,o){n&1&&(t(0,"div",22),i(1,"ID inv\xE1lido"),e())}function A(n,o){n&1&&(t(0,"div",22),i(1,"\u274C El ID ya existe"),e())}function T(n,o){n&1&&(t(0,"div",23),i(1,"\u2705 ID disponible"),e())}function L(n,o){n&1&&(t(0,"div",22),i(1,"Nombre inv\xE1lido"),e())}function z(n,o){if(n&1&&(t(0,"p",23),i(1),e()),n&2){let r=b();s(),v(r.successMessage)}}function q(n,o){if(n&1&&(t(0,"p",22),i(1),e()),n&2){let r=b();s(),v(r.errorMessage)}}var F=class n{constructor(o,r){this.fb=o;this.http=r}form;idDisponible=null;errorMessage="";successMessage="";ngOnInit(){this.form=this.fb.group({id:["",[d.required,d.minLength(3),d.maxLength(10)]],name:["",[d.required,d.minLength(5),d.maxLength(100)]],description:["",[d.required,d.minLength(10),d.maxLength(200)]],logo:["",d.required],date_release:["",d.required],date_revision:["",d.required]})}verificarId(){let o=this.form.value.id;!o||o.length<3||this.http.get(`http://localhost:3002/bp/products/verification/${o}`).subscribe({next:r=>this.idDisponible=!r,error:()=>this.idDisponible=null})}onSubmit(){if(this.form.invalid||this.idDisponible===!1)return;let o=this.form.value;console.log("Enviando producto:",o),this.http.post("http://localhost:3002/bp/products",o).subscribe({next:()=>{this.successMessage="\u2705 Producto agregado correctamente",this.errorMessage="",this.form.reset(),this.idDisponible=null},error:r=>{r.status===0?this.errorMessage="\u274C Error: No se puede conectar al servidor. Aseg\xFArate de que el backend est\xE9 corriendo en localhost:3002":this.errorMessage="\u274C Error al guardar: "+r.message,this.successMessage=""}})}onReset(){this.form.reset(),this.idDisponible=null,this.successMessage="",this.errorMessage=""}static \u0275fac=function(r){return new(r||n)(g(D),g(M))};static \u0275cmp=_({type:n,selectors:[["app-add-product"]],standalone:!0,features:[x],decls:43,vars:8,consts:[[1,"card-container"],[1,"form-card"],[3,"ngSubmit","formGroup"],[1,"form-row"],[1,"form-group"],["for","id"],["id","id","formControlName","id",3,"blur"],["class","error-msg",4,"ngIf"],["class","success-msg",4,"ngIf"],["for","name"],["id","name","formControlName","name"],["for","description"],["id","description","formControlName","description"],["for","logo"],["id","logo","formControlName","logo"],["for","date_release"],["type","date","id","date_release","formControlName","date_release"],["for","date_revision"],["type","date","id","date_revision","formControlName","date_revision"],[1,"form-actions"],["type","button",1,"btn-secondary",3,"click"],["type","submit",1,"btn-enviar",3,"disabled"],[1,"error-msg"],[1,"success-msg"]],template:function(r,a){if(r&1&&(t(0,"div",0)(1,"div",1)(2,"h2"),i(3,"Formulario de Registro"),e(),t(4,"form",2),f("ngSubmit",function(){return a.onSubmit()}),t(5,"div",3)(6,"div",4)(7,"label",5),i(8,"ID:"),e(),t(9,"input",6),f("blur",function(){return a.verificarId()}),e(),u(10,k,2,0,"div",7)(11,A,2,0,"div",7)(12,T,2,0,"div",8),e(),t(13,"div",4)(14,"label",9),i(15,"Nombre:"),e(),c(16,"input",10),u(17,L,2,0,"div",7),e()(),t(18,"div",3)(19,"div",4)(20,"label",11),i(21,"Descripci\xF3n:"),e(),c(22,"textarea",12),e(),t(23,"div",4)(24,"label",13),i(25,"Logo (URL):"),e(),c(26,"input",14),e()(),t(27,"div",3)(28,"div",4)(29,"label",15),i(30,"Fecha de Liberaci\xF3n:"),e(),c(31,"input",16),e(),t(32,"div",4)(33,"label",17),i(34,"Fecha de Revisi\xF3n:"),e(),c(35,"input",18),e()(),t(36,"div",19)(37,"button",20),f("click",function(){return a.onReset()}),i(38,"Reiniciar"),e(),t(39,"button",21),i(40,"Enviar"),e()(),u(41,z,2,1,"p",8)(42,q,2,1,"p",7),e()()()),r&2){let m,p;s(4),l("formGroup",a.form),s(6),l("ngIf",((m=a.form.get("id"))==null?null:m.invalid)&&((m=a.form.get("id"))==null?null:m.touched)),s(),l("ngIf",a.idDisponible===!1),s(),l("ngIf",a.idDisponible===!0),s(5),l("ngIf",((p=a.form.get("name"))==null?null:p.invalid)&&((p=a.form.get("name"))==null?null:p.touched)),s(22),l("disabled",a.form.invalid||a.idDisponible===!1),s(2),l("ngIf",a.successMessage),s(),l("ngIf",a.errorMessage)}},dependencies:[C,h,N,w,y,O,E,S,I,P],styles:[".card-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:2rem;background:linear-gradient(135deg,#f5f7fa,#e4e8ec);min-height:calc(100vh - 200px);overflow-y:auto}.form-card[_ngcontent-%COMP%]{background:#fff;border-radius:var(--border-radius);padding:2.5rem;box-shadow:var(--shadow-hover);width:100%;max-width:800px;box-sizing:border-box;animation:_ngcontent-%COMP%_slideUp .4s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.form-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:28px;margin-bottom:2rem;color:var(--secondary-color);font-weight:700}.form-row[_ngcontent-%COMP%]{display:flex;gap:1.5rem;margin-bottom:1.25rem;flex-wrap:wrap}.form-group[_ngcontent-%COMP%]{flex:1;min-width:250px;display:flex;flex-direction:column}label[_ngcontent-%COMP%]{font-weight:600;color:var(--text-color);margin-bottom:.5rem;font-size:14px}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:.75rem 1rem;border:2px solid #e2e8f0;border-radius:10px;font-size:14px;background:#f8fafc;transition:var(--transition)}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{border-color:var(--primary-color);background:#fff;outline:none;box-shadow:0 0 0 3px #00d9ff1a}textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1.5rem;margin-top:2.5rem}.btn-secondary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e2e8f0,#cbd5e1);color:var(--secondary-color);padding:.75rem 2rem;border:none;border-radius:30px;font-weight:600;font-size:15px;cursor:pointer;transition:var(--transition)}.btn-secondary[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 15px #0000001a}.btn-enviar[_ngcontent-%COMP%]{background:linear-gradient(135deg,var(--success-color) 0%,#26a65b 100%);color:#fff;padding:.75rem 2rem;border:none;border-radius:30px;font-weight:600;font-size:15px;cursor:pointer;transition:var(--transition);box-shadow:0 4px 15px #2ed5734d}.btn-enviar[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px #2ed57366}.btn-enviar[_ngcontent-%COMP%]:disabled{background:#cbd5e1;cursor:not-allowed;box-shadow:none}.success-msg[_ngcontent-%COMP%]{color:var(--success-color);margin-top:1rem;text-align:center;font-weight:600;padding:.75rem;background:#2ed5731a;border-radius:8px}.error-msg[_ngcontent-%COMP%]{color:var(--danger-color);font-size:13px;margin-top:.25rem}.error-msg[_ngcontent-%COMP%]:first-of-type{text-align:center;background:#ff47571a;padding:.75rem;border-radius:8px;margin-top:1rem}@media (max-width: 600px){.form-card[_ngcontent-%COMP%]{padding:1.5rem}.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.form-group[_ngcontent-%COMP%]{min-width:100%}.form-actions[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.btn-secondary[_ngcontent-%COMP%], .btn-enviar[_ngcontent-%COMP%]{width:100%;justify-content:center}}"]})};export{F as AddProductComponent};
