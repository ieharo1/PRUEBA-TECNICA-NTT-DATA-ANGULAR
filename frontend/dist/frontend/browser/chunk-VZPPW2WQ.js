import{a as Y}from"./chunk-UHBTZA2K.js";import{d as I,e as T,g as V}from"./chunk-7WJJRPRX.js";import{a as A,c as z,e as N,i as j,j as D,k as R,m as W}from"./chunk-ETIHGRTA.js";import{Ga as _,Ja as p,Ka as w,La as t,Ma as n,Na as O,Oa as x,Pa as m,Qa as s,Ra as y,Sa as o,Ta as f,Ua as E,Va as h,W as M,Wa as C,Xa as P,Za as S,da as u,ea as g,sa as v,ub as k,va as a,vb as F,wa as b,wb as L}from"./chunk-F7SZSIFR.js";function U(l,r){if(l&1){let e=x();t(0,"ul",22)(1,"li",20),m("click",function(){u(e);let c=s().$implicit,d=s();return g(d.editarProducto(c))}),o(2,"Editar"),n(),t(3,"li",20),m("click",function(){u(e);let c=s().$implicit,d=s();return g(d.mostrarModalEliminar(c))}),o(4,"Eliminar"),n()()}}function q(l,r){if(l&1){let e=x();t(0,"tr")(1,"td",12),O(2,"img",13),n(),t(3,"td",14),o(4),n(),t(5,"td",15),o(6),n(),t(7,"td",16),o(8),n(),t(9,"td",17),o(10),n(),t(11,"td",18)(12,"div",19)(13,"button",20),m("click",function(){let c=u(e).$implicit,d=s();return g(d.toggleMenu(c.id))}),o(14,"\u22EE"),n(),_(15,U,5,0,"ul",21),n()()()}if(l&2){let e=r.$implicit,i=s();a(2),y("alt",e.name),p("src",e.logo,v),a(2),f(e.name),a(2),f(e.description),a(2),f(e.date_release),a(2),f(e.date_revision),a(2),w("open",i.openedMenu===e.id),a(3),p("ngIf",i.openedMenu===e.id)}}function G(l,r){if(l&1){let e=x();t(0,"div",23)(1,"div",24)(2,"h3"),o(3,"Confirmar eliminaci\xF3n"),n(),t(4,"p"),o(5,"\xBFEst\xE1s seguro de eliminar el producto "),t(6,"strong"),o(7),n(),o(8,"?"),n(),t(9,"button",20),m("click",function(){u(e);let c=s();return g(c.cancelarEliminar())}),o(10,"Cancelar"),n(),t(11,"button",20),m("click",function(){u(e);let c=s();return g(c.confirmarEliminar())}),o(12,"Eliminar"),n()()()}if(l&2){let e=s();a(7),f(e.productoAEliminar.name)}}var B=class l{constructor(r,e){this.productService=r;this.router=e}products=[];filteredProducts=[];loading=!1;errorMessage="";searchText="";cantidadMostrar=5;openedMenu=null;productoAEliminar=null;ngOnInit(){this.cargarProductos()}cargarProductos(){this.loading=!0,this.productService.getProducts().subscribe({next:r=>{this.products=r.data,this.aplicarFiltro(),this.loading=!1},error:r=>{this.errorMessage="Error cargando productos: "+r.message,this.loading=!1}})}aplicarFiltro(){let r=this.searchText.toLowerCase(),e=this.products.filter(i=>i.name.toLowerCase().includes(r)||i.description.toLowerCase().includes(r));this.filteredProducts=e.slice(0,this.cantidadMostrar)}onSearchChange(){this.aplicarFiltro()}onChangeCantidad(){this.aplicarFiltro()}toggleMenu(r){this.openedMenu=this.openedMenu===r?null:r}editarProducto(r){this.openedMenu=null,this.router.navigate(["/editar",r.id])}mostrarModalEliminar(r){this.openedMenu=null,this.productoAEliminar=r}cancelarEliminar(){this.productoAEliminar=null}confirmarEliminar(){if(this.productoAEliminar){let r=this.productoAEliminar.id;this.productService.deleteProduct(r).subscribe({next:()=>{this.products=this.products.filter(e=>e.id!==r),this.aplicarFiltro(),this.productoAEliminar=null},error:e=>{this.errorMessage="Error eliminando producto: "+e.message,this.productoAEliminar=null}})}}static \u0275fac=function(e){return new(e||l)(b(Y),b(I))};static \u0275cmp=M({type:l,selectors:[["app-product-list"]],standalone:!0,features:[S],decls:40,vars:8,consts:[[1,"card-container"],[1,"top-bar"],["type","text","placeholder","Search...",1,"search-input",3,"ngModelChange","input","ngModel"],["routerLink","/agregar",1,"btn-agregar"],[1,"table-wrapper"],[1,"custom-table"],[1,"info-icon"],[4,"ngFor","ngForOf"],[1,"footer-bar"],[3,"ngModelChange","change","ngModel"],[3,"value"],["class","modal-backdrop",4,"ngIf"],["data-label","Logo"],[1,"logo-img",3,"src","alt"],["data-label","Nombre del producto"],["data-label","Descripci\xF3n"],["data-label","Fecha de liberaci\xF3n"],["data-label","Fecha de reestructuraci\xF3n"],["data-label","Acciones"],[1,"dropdown"],[3,"click"],["class","dropdown-menu",4,"ngIf"],[1,"dropdown-menu"],[1,"modal-backdrop"],[1,"modal"]],template:function(e,i){e&1&&(t(0,"div",0)(1,"div",1)(2,"input",2),P("ngModelChange",function(d){return C(i.searchText,d)||(i.searchText=d),d}),m("input",function(){return i.onSearchChange()}),n(),t(3,"button",3),o(4,"Agregar Producto"),n()(),t(5,"div",4)(6,"table",5)(7,"thead")(8,"tr")(9,"th"),o(10,"Logo"),n(),t(11,"th"),o(12,"Nombre del producto"),n(),t(13,"th"),o(14,"Descripci\xF3n "),t(15,"span",6),o(16,"i"),n()(),t(17,"th"),o(18,"Fecha de liberaci\xF3n "),t(19,"span",6),o(20,"i"),n()(),t(21,"th"),o(22,"Fecha de reestructuraci\xF3n "),t(23,"span",6),o(24,"i"),n()(),t(25,"th"),o(26,"Acciones"),n()()(),t(27,"tbody"),_(28,q,16,9,"tr",7),n()()(),t(29,"div",8)(30,"span"),o(31),n(),t(32,"select",9),P("ngModelChange",function(d){return C(i.cantidadMostrar,d)||(i.cantidadMostrar=d),d}),m("change",function(){return i.onChangeCantidad()}),t(33,"option",10),o(34,"5"),n(),t(35,"option",10),o(36,"10"),n(),t(37,"option",10),o(38,"20"),n()()()(),_(39,G,13,1,"div",11)),e&2&&(a(2),h("ngModel",i.searchText),a(26),p("ngForOf",i.filteredProducts),a(3),E("",i.filteredProducts.length," Resultados"),a(),h("ngModel",i.cantidadMostrar),a(),p("value",5),a(2),p("value",10),a(2),p("value",20),a(2),p("ngIf",i.productoAEliminar))},dependencies:[L,k,F,W,D,R,A,j,z,N,V,T],styles:[".card-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:space-between;background:linear-gradient(135deg,#f5f7fa,#e4e8ec);padding:2rem;box-sizing:border-box;min-height:calc(100vh - 200px)}.top-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.5rem;flex-wrap:wrap;gap:1rem}.search-input[_ngcontent-%COMP%]{padding:.75rem 1.25rem;width:300px;border-radius:30px;border:2px solid #e2e8f0;font-size:14px;transition:var(--transition);background:#fff}.search-input[_ngcontent-%COMP%]:focus{border-color:var(--primary-color);box-shadow:0 0 0 3px #00d9ff1a}.btn-agregar[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00d9ff,#09c);color:#fff;padding:.75rem 1.5rem;border:none;border-radius:30px;font-weight:600;font-size:14px;cursor:pointer;transition:var(--transition);display:flex;align-items:center;gap:.5rem;box-shadow:0 4px 15px #00d9ff4d}.btn-agregar[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 20px #00d9ff66}.table-wrapper[_ngcontent-%COMP%]{background:#fff;border-radius:var(--border-radius);padding:1rem;overflow-x:auto;flex:1 1 auto;min-height:0;box-shadow:var(--shadow)}.custom-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;table-layout:fixed}.custom-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:linear-gradient(135deg,#1a1a2e,#16213e)}.custom-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;padding:1rem .75rem;font-weight:600;color:#fff;font-size:13px;text-transform:uppercase;letter-spacing:.5px}.custom-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:1px solid #e2e8f0;transition:var(--transition)}.custom-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#00d9ff0d,#0099cc0d)}.custom-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem .75rem;vertical-align:middle;word-wrap:break-word;white-space:normal;overflow-wrap:break-word;text-align:left;font-size:14px;color:var(--text-color)}.logo-img[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:50%;object-fit:cover;border:2px solid var(--primary-color)}.info-icon[_ngcontent-%COMP%]{font-style:normal;background:var(--primary-color);color:#1a1a2e;border-radius:50%;padding:.2rem .5rem;margin-left:.3rem;font-size:10px;cursor:pointer;font-weight:700}.footer-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:1.5rem;padding:1rem;background:#fff;border-radius:var(--border-radius);box-shadow:var(--shadow)}.footer-bar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#64748b;font-weight:500}.footer-bar[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:8px 16px;border-radius:20px;border:2px solid #e2e8f0;background:#fff;cursor:pointer;transition:var(--transition)}.footer-bar[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:var(--primary-color)}.dropdown[_ngcontent-%COMP%]{position:relative;display:inline-block}.dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:2px solid #e2e8f0;font-size:18px;cursor:pointer;padding:.25rem .75rem;border-radius:8px;transition:var(--transition)}.dropdown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:var(--primary-color);border-color:var(--primary-color)}.dropdown-menu[_ngcontent-%COMP%]{position:absolute;right:0;top:35px;background-color:#fff;border:1px solid #e2e8f0;box-shadow:var(--shadow-hover);border-radius:12px;list-style:none;padding:.5rem 0;margin:0;width:150px;z-index:9999;animation:_ngcontent-%COMP%_slideDown .2s ease}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 16px;cursor:pointer;transition:var(--transition);font-size:14px}.dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{color:var(--primary-color);font-weight:600}.dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{color:var(--danger-color);font-weight:600}.dropdown-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#00d9ff1a,#0099cc1a)}.modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;justify-content:center;align-items:center;z-index:10000;animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.modal[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:var(--border-radius);width:400px;text-align:center;box-shadow:var(--shadow-hover);animation:_ngcontent-%COMP%_scaleIn .3s ease}@keyframes _ngcontent-%COMP%_scaleIn{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}.modal[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:1rem;color:var(--secondary-color)}.modal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:#64748b}.modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 10px;padding:10px 24px;border:none;border-radius:25px;font-weight:600;font-size:14px;cursor:pointer;transition:var(--transition)}.modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type{background:#e2e8f0;color:var(--secondary-color)}.modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type:hover{background:#cbd5e1}.modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type{background:linear-gradient(135deg,var(--danger-color) 0%,#cc3d47 100%);color:#fff;box-shadow:0 4px 15px #ff47574d}.modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type:hover{transform:translateY(-2px);box-shadow:0 6px 20px #ff475766}@media (max-width: 768px){.top-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.search-input[_ngcontent-%COMP%]{width:100%}.btn-agregar[_ngcontent-%COMP%]{justify-content:center}.table-wrapper[_ngcontent-%COMP%]{padding:.5rem}.modal[_ngcontent-%COMP%]{width:90%;margin:1rem}}"]})};export{B as ProductListComponent};
