import{a as J}from"./chunk-SCH7AGOO.js";import{a as j,b as u,c as R,d as q,f as A,g as B,h as H,l as U,n as Y}from"./chunk-TSZ43ZED.js";import{$ as T,A as g,E as p,F as w,H as f,J as m,N as n,O as e,P as c,Q as F,R as k,S as h,T as o,V as I,ka as N,m as y,oa as z,qa as L,r as E,s as S,t as b,ta as V,u as D,ua as G,z as a}from"./chunk-OBMOT5OB.js";function Q(r,l){r&1&&(n(0,"div",6),c(1,"div",9),n(2,"p"),o(3,"Cargando producto..."),e()())}function W(r,l){if(r&1&&(n(0,"div",7),b(),n(1,"svg",4),c(2,"path",10),e(),o(3),e()),r&2){let t=h();a(3),I(" ",t.errorMessage," ")}}function X(r,l){r&1&&(n(0,"span",20),o(1,"M\xEDnimo 5 caracteres"),e())}function Z(r,l){r&1&&(n(0,"span",20),o(1,"M\xEDnimo 10 caracteres"),e())}function $(r,l){r&1&&(n(0,"span",20),o(1,"URL requerida"),e())}function ee(r,l){r&1&&(n(0,"span",20),o(1,"Fecha requerida"),e())}function te(r,l){r&1&&(n(0,"span",20),o(1,"Fecha requerida"),e())}function ne(r,l){if(r&1){let t=F();n(0,"form",11),k("ngSubmit",function(){E(t);let s=h();return S(s.onSubmit())}),n(1,"div",12)(2,"div",13)(3,"label",14)(4,"span",15),o(5,"\u{1F3F7}\uFE0F"),e(),o(6," ID del Producto "),e(),c(7,"input",16),n(8,"span",17),o(9,"El ID no se puede modificar"),e()(),n(10,"div",13)(11,"label",18)(12,"span",15),o(13,"\u{1F4DD}"),e(),o(14," Nombre del Producto "),e(),c(15,"input",19),p(16,X,2,0,"span",20),e(),n(17,"div",21)(18,"label",22)(19,"span",15),o(20,"\u{1F4CB}"),e(),o(21," Descripci\xF3n "),e(),c(22,"textarea",23),p(23,Z,2,0,"span",20),e(),n(24,"div",13)(25,"label",24)(26,"span",15),o(27,"\u{1F5BC}\uFE0F"),e(),o(28," URL del Logo "),e(),c(29,"input",25),p(30,$,2,0,"span",20),e(),n(31,"div",13)(32,"label",26)(33,"span",15),o(34,"\u{1F4C5}"),e(),o(35," Fecha de Liberaci\xF3n "),e(),c(36,"input",27),p(37,ee,2,0,"span",20),e(),n(38,"div",13)(39,"label",28)(40,"span",15),o(41,"\u{1F504}"),e(),o(42," Fecha de Revisi\xF3n "),e(),c(43,"input",29),p(44,te,2,0,"span",20),e()(),n(45,"div",30)(46,"button",31),k("click",function(){E(t);let s=h();return S(s.goBack())}),b(),n(47,"svg",4),c(48,"path",32),e(),o(49," Cancelar "),e(),D(),n(50,"button",33),b(),n(51,"svg",4),c(52,"path",34),e(),o(53," Guardar Cambios "),e()()()}if(r&2){let t,d,s,_,v,x,C,P,M,O,i=h();w("formGroup",i.form),a(15),f("error",((t=i.form.get("name"))==null?null:t.invalid)&&((t=i.form.get("name"))==null?null:t.touched)),a(),m((d=i.form.get("name"))!=null&&d.invalid&&((d=i.form.get("name"))!=null&&d.touched)?16:-1),a(6),f("error",((s=i.form.get("description"))==null?null:s.invalid)&&((s=i.form.get("description"))==null?null:s.touched)),a(),m((_=i.form.get("description"))!=null&&_.invalid&&((_=i.form.get("description"))!=null&&_.touched)?23:-1),a(6),f("error",((v=i.form.get("logo"))==null?null:v.invalid)&&((v=i.form.get("logo"))==null?null:v.touched)),a(),m((x=i.form.get("logo"))!=null&&x.invalid&&((x=i.form.get("logo"))!=null&&x.touched)?30:-1),a(6),f("error",((C=i.form.get("date_release"))==null?null:C.invalid)&&((C=i.form.get("date_release"))==null?null:C.touched)),a(),m((P=i.form.get("date_release"))!=null&&P.invalid&&((P=i.form.get("date_release"))!=null&&P.touched)?37:-1),a(6),f("error",((M=i.form.get("date_revision"))==null?null:M.invalid)&&((M=i.form.get("date_revision"))==null?null:M.touched)),a(),m((O=i.form.get("date_revision"))!=null&&O.invalid&&((O=i.form.get("date_revision"))!=null&&O.touched)?44:-1),a(6),w("disabled",i.form.invalid)}}var K=class r{constructor(l,t,d,s,_){this.fb=l;this.route=t;this.productService=d;this.router=s;this.toastService=_}form;loading=!1;errorMessage="";productId=null;ngOnInit(){this.productId=this.route.snapshot.paramMap.get("id"),this.crearFormulario(),this.productId?this.cargarProducto(this.productId):this.errorMessage="ID de producto inv\xE1lido."}crearFormulario(){this.form=this.fb.group({id:[{value:"",disabled:!0}],name:["",[u.required,u.minLength(5)]],description:["",[u.required,u.minLength(10)]],logo:["",u.required],date_release:["",u.required],date_revision:["",u.required]})}cargarProducto(l){this.loading=!0,this.productService.getProductById(l).subscribe({next:t=>{if(!t){this.errorMessage="Producto no encontrado.",this.loading=!1;return}this.form.patchValue({id:t.id,name:t.name,description:t.description,logo:t.logo,date_release:t.date_release,date_revision:t.date_revision}),this.loading=!1},error:t=>{t.status===0?this.errorMessage="No se puede conectar al servidor. Aseg\xFArate de que el backend est\xE9 corriendo.":this.errorMessage="Error cargando producto: "+(t.error?.message||t.message),this.loading=!1}})}get f(){return this.form.controls}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}if(!this.productId){this.errorMessage="ID de producto inv\xE1lido.";return}let l={id:this.productId,name:this.f.name.value,description:this.f.description.value,logo:this.f.logo.value,date_release:this.f.date_release.value,date_revision:this.f.date_revision.value};this.loading=!0,this.productService.updateProduct(l).subscribe({next:()=>{this.toastService.success("\xA1Producto actualizado exitosamente!"),this.loading=!1,setTimeout(()=>{this.router.navigate(["/productos"])},1500)},error:t=>{t.status===0?this.toastService.error("No se puede conectar al servidor. Aseg\xFArate de que el backend est\xE9 corriendo."):this.toastService.error("Error actualizando producto: "+(t.error?.message||t.message)),this.loading=!1}})}goBack(){this.router.navigate(["/productos"])}static \u0275fac=function(t){return new(t||r)(g(U),g(z),g(J),g(L),g(G))};static \u0275cmp=y({type:r,selectors:[["app-edit-product"]],standalone:!0,features:[T],decls:13,vars:3,consts:[[1,"form-container"],[1,"form-card"],[1,"form-header"],[1,"header-icon","edit"],["viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["d","M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 2.828 112.828L11.828 15H9v-2.828l8.586-8.586z"],[1,"loading-container"],[1,"error-banner"],[1,"product-form",3,"formGroup"],[1,"spinner"],["d","M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"],[1,"product-form",3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"form-group"],["for","id"],[1,"label-icon"],["id","id","formControlName","id","readonly","",1,"readonly"],[1,"field-hint"],["for","name"],["id","name","formControlName","name","placeholder","Ej: Producto Premium"],[1,"field-error"],[1,"form-group","full-width"],["for","description"],["id","description","formControlName","description","placeholder","Describe las caracter\xEDsticas del producto...","rows","3"],["for","logo"],["id","logo","formControlName","logo","placeholder","https://ejemplo.com/logo.png"],["for","date_release"],["type","date","id","date_release","formControlName","date_release"],["for","date_revision"],["type","date","id","date_revision","formControlName","date_revision"],[1,"form-actions"],["type","button",1,"btn-cancel",3,"click"],["d","M6 18L18 6M6 6l12 12"],["type","submit",1,"btn-submit",3,"disabled"],["d","M5 13l4 4L19 7"]],template:function(t,d){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),b(),n(4,"svg",4),c(5,"path",5),e()(),D(),n(6,"h2"),o(7,"Editar Producto"),e(),n(8,"p"),o(9,"Actualiza los datos del producto"),e()(),p(10,Q,4,0,"div",6)(11,W,4,1,"div",7)(12,ne,54,17,"form",8),e()()),t&2&&(a(10),m(d.loading?10:-1),a(),m(d.errorMessage?11:-1),a(),m(!d.loading&&!d.errorMessage&&d.form?12:-1))},dependencies:[N,Y,A,j,R,q,B,H,V],styles:[".form-container[_ngcontent-%COMP%]{min-height:calc(100vh - 200px);display:flex;justify-content:center;align-items:flex-start;padding:2rem;background:linear-gradient(135deg,#0f172a,#1e293b,#0f172a)}.form-card[_ngcontent-%COMP%]{background:linear-gradient(145deg,#1e293be6,#0f172af2);border-radius:24px;padding:2.5rem;width:100%;max-width:800px;box-shadow:0 25px 50px #00000080;border:1px solid rgba(255,255,255,.1);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);animation:_ngcontent-%COMP%_slideUp .5s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.form-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2.5rem}.header-icon[_ngcontent-%COMP%]{width:80px;height:80px;margin:0 auto 1rem;background:linear-gradient(135deg,#f59e0b,#d97706);border-radius:20px;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{transform:scale(1)}50%{transform:scale(1.05)}}.header-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:40px;height:40px;color:#fff}.form-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;font-weight:800;background:linear-gradient(90deg,#f59e0b,#f97316);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin:0 0 .5rem}.form-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#94a3b8;margin:0;font-size:1rem}.loading-container[_ngcontent-%COMP%]{text-align:center;padding:3rem}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid rgba(255,255,255,.1);border-top-color:#06b6d4;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin:0 auto 1rem}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#94a3b8}.error-banner[_ngcontent-%COMP%]{background:#ef444426;border:1px solid rgba(239,68,68,.3);border-radius:12px;padding:1rem;margin-bottom:1.5rem;color:#ef4444;display:flex;align-items:center;gap:.75rem}.error-banner[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:24px;height:24px;flex-shrink:0}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group.full-width[_ngcontent-%COMP%]{grid-column:1/-1}label[_ngcontent-%COMP%]{font-weight:600;color:#e2e8f0;margin-bottom:.75rem;font-size:.9rem;display:flex;align-items:center;gap:.5rem}.label-icon[_ngcontent-%COMP%]{font-size:1rem}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{padding:1rem 1.25rem;border:2px solid rgba(255,255,255,.1);border-radius:14px;font-size:.95rem;background:#0f172acc;color:#fff;transition:all .3s ease}input[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#f59e0b;box-shadow:0 0 0 4px #f59e0b26;background:#0f172a}input.error[_ngcontent-%COMP%], textarea.error[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 0 0 4px #ef444426}input.readonly[_ngcontent-%COMP%]{background:#37415180;color:#9ca3af;cursor:not-allowed}input[_ngcontent-%COMP%]::placeholder, textarea[_ngcontent-%COMP%]::placeholder{color:#475569}textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.field-hint[_ngcontent-%COMP%]{color:#64748b;font-size:.75rem;margin-top:.5rem}.field-error[_ngcontent-%COMP%]{color:#ef4444;font-size:.8rem;margin-top:.5rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;margin-top:2.5rem}.btn-cancel[_ngcontent-%COMP%], .btn-submit[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:1rem 2rem;border-radius:14px;font-weight:600;font-size:1rem;cursor:pointer;transition:all .3s ease}.btn-cancel[_ngcontent-%COMP%]{background:#ffffff1a;color:#e2e8f0;border:2px solid rgba(255,255,255,.2)}.btn-cancel[_ngcontent-%COMP%]:hover{background:#fff3;transform:translateY(-2px)}.btn-cancel[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.btn-submit[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;border:none;box-shadow:0 4px 15px #f59e0b66}.btn-submit[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 25px #f59e0b80}.btn-submit[_ngcontent-%COMP%]:disabled{background:#374151;color:#6b7280;cursor:not-allowed;box-shadow:none}.btn-submit[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}@media (max-width: 768px){.form-container[_ngcontent-%COMP%]{padding:1rem}.form-card[_ngcontent-%COMP%]{padding:1.5rem}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.btn-cancel[_ngcontent-%COMP%], .btn-submit[_ngcontent-%COMP%]{justify-content:center}}"]})};export{K as EditProductComponent};
